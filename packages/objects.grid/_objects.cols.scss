/*------------------------------------*\
  #Cols
\*------------------------------------*/

//  variables

$cols-number: 12 !default;

$cols-gutters: (
  '1': $space-1,
  '2': $space-2,
  '3': $space-3,
  '4': $space-4,
  '5': $space-5,
  '6': $space-6
) !default;

$cols-breakpoints: (
  'xs': $breakpoint-xs,
  'sm': $breakpoint-sm,
  'md': $breakpoint-md,
  'lg': $breakpoint-lg,
  'xl': $breakpoint-xl
) !default;





/**
 * [1] make negative margins work properly
 */

@include object('cols') {
  align-items: flex-start;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  margin: 0;
  width: auto; // [1]

  @include modifier('stretch') {
    align-items: stretch;

    @include modifies-element('col') {
      display: flex;
    }
  }

  @include modifier('middle') {
    align-items: center;
  }

  @each $key, $value in $cols-gutters {
    @include modifier('gutter-' + $key) {
      margin: ($value / -2);

      @include modifies-element('col') {
        padding: ($value / 2);
      }
    }
  }

  @include element('col') {
    flex: 1 1 0;
    min-height: 0;
    min-width: 0;
    padding: 0;
    width: auto;

    @include modifier('auto') {
      flex: 1 1 auto;
      width: auto;
    }

    @include modifier('fit') {
      flex: 1 1 0;
    }

    @for $col-number from 1 through $cols-number {
      @include modifier($col-number) {
        flex: none;
        width: ($col-number / $cols-number) * 100%;
      }
    }

    @each $size, $value in $cols-breakpoints {
      @for $col-number from 1 through $cols-number {
        @include modifier('auto') {
          @include suffix($size) {
            @include desde($size) {
              flex: 1 1 auto;
              width: auto;
            }
          }
        }

        @include modifier('fit') {
          @include suffix($size) {
            @include desde($size) {
              flex: 1 1 0;
            }
          }
        }

        @include modifier($col-number) {
          @include suffix($size) {
            @include desde($size) {
              flex: none;
              width: ($col-number / $cols-number) * 100%;
            }
          }
        }
      }
    }
  }
}
